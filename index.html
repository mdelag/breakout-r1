<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=0.6" />
  <title>Breakout Game for Rabbit R1</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      transform: rotate(-90deg);
      background-color: #222;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      font-family: Arial, sans-serif;
      overflow: hidden;
    }
    #gameContainer {
      position: relative;
      width: 640px;
      height: 480px;
      border: 2px solid #444;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
    }
    canvas { background-color: #000; display: block; }
    #gameOverlay {
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      background-color: rgba(0, 0, 0, 0.7);
      color: white;
      font-size: 24px;
      z-index: 10;
    }
    #gameOverlay.hidden { display: none; }
    #gameOverlay h1 { font-size: 36px; margin-bottom: 20px; color: #FF8C00; }
    #gameOverlay p { margin: 10px 0; }
    #startButton, #restartButton {
      background-color: #FF8C00;
      color: white;
      border: none;
      padding: 10px 20px;
      font-size: 18px;
      margin-top: 20px;
      cursor: pointer;
      border-radius: 5px;
      transition: background-color 0.3s;
    }
    #startButton:hover, #restartButton:hover { background-color: #FF6600; }
    #score, #lives {
      position: absolute;
      color: white;
      font-size: 16px;
      padding: 10px;
      z-index: 5;
    }
    #score { top: 0; left: 0; }
    #lives { top: 0; right: 0; }
  </style>
</head>
<body>
<div id="gameContainer">
  <canvas id="gameCanvas" width="640" height="480"></canvas>
  <div id="score">Score: 0</div>
  <div id="lives">Lives: 3</div>
  <div id="gameOverlay">
    <h1>BREAKOUT</h1>
    <p>Classic arcade game for Rabbit R1</p>
    <p>Use UP/DOWN arrow keys or scroll wheel to move paddle</p>
    <p>Break all bricks to win!</p>
    <button id="startButton">START GAME</button>
  </div>
</div>
<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");
const scoreElement = document.getElementById("score");
const livesElement = document.getElementById("lives");
const gameOverlay = document.getElementById("gameOverlay");
const startButton = document.getElementById("startButton");
const GAME_WIDTH = canvas.width;
const GAME_HEIGHT = canvas.height;
let gameState = 'start';
let score = 0;
let lives = 3;
let frameID = null;
const paddleHeight = 15;
const paddleWidth = 100;
let paddleX = (GAME_WIDTH - paddleWidth) / 2;
let targetPaddleX = paddleX;
const paddleLerp = 0.4;
let ballX = GAME_WIDTH / 2;
let ballY = GAME_HEIGHT - paddleHeight - 10;
let ballSpeedX = 4;
let ballSpeedY = -4;
const ballRadius = 8;
const maxBallSpeed = 10;
const brickRowCount = 5;
const brickColumnCount = 8;
const brickWidth = 60;
const brickHeight = 20;
const brickPadding = 5;
const brickOffsetTop = 30;
const brickOffsetLeft = 30;
let bricks = [];
let activeBrickCount = 0;

function initBricks() {
  bricks = [];
  activeBrickCount = 0;
  for (let r = 0; r < brickRowCount; r++) {
    bricks[r] = [];
    for (let c = 0; c < brickColumnCount; c++) {
      const brickX = c * (brickWidth + brickPadding) + brickOffsetLeft;
      const brickY = r * (brickHeight + brickPadding) + brickOffsetTop;
      bricks[r][c] = { x: brickX, y: brickY, status: 1 };
      activeBrickCount++;
    }
  }
}

function drawBricks() {
  for (let r = 0; r < brickRowCount; r++) {
    for (let c = 0; c < brickColumnCount; c++) {
      const b = bricks[r][c];
      if (b.status === 1) {
        ctx.fillStyle = "#FF8C00";
        ctx.fillRect(b.x, b.y, brickWidth, brickHeight);
      }
    }
  }
}

function drawPaddle() {
  ctx.fillStyle = "#0095DD";
  ctx.fillRect(paddleX, GAME_HEIGHT - paddleHeight, paddleWidth, paddleHeight);
}

function drawBall() {
  ctx.beginPath();
  ctx.arc(ballX, ballY, ballRadius, 0, Math.PI * 2);
  ctx.fillStyle = "#fff";
  ctx.fill();
  ctx.closePath();
}

function draw() {
  ctx.clearRect(0, 0, GAME_WIDTH, GAME_HEIGHT);
  drawBricks();
  drawPaddle();
  drawBall();
}

function moveBall() {
  ballX += ballSpeedX;
  ballY += ballSpeedY;
  if (ballX + ballRadius > GAME_WIDTH || ballX - ballRadius < 0) ballSpeedX *= -1;
  if (ballY - ballRadius < 0) ballSpeedY *= -1;
  if (ballY + ballRadius > GAME_HEIGHT) {
    lives--;
    updateLives();
    if (lives === 0) gameOver();
    else resetBall();
  }
  if (ballY + ballRadius > GAME_HEIGHT - paddleHeight && ballX > paddleX && ballX < paddleX + paddleWidth) {
    ballSpeedY *= -1;
  }
  for (let r = 0; r < brickRowCount; r++) {
    for (let c = 0; c < brickColumnCount; c++) {
      const b = bricks[r][c];
      if (b.status === 1 && ballX > b.x && ballX < b.x + brickWidth && ballY > b.y && ballY < b.y + brickHeight) {
        ballSpeedY *= -1;
        b.status = 0;
        score++;
        updateScore();
        if (--activeBrickCount === 0) gameOver();
      }
    }
  }
}

function movePaddle() {
  paddleX += (targetPaddleX - paddleX) * paddleLerp;
  paddleX = Math.max(0, Math.min(GAME_WIDTH - paddleWidth, paddleX));
}

function gameLoop() {
  if (gameState === 'playing') {
    draw();
    moveBall();
    movePaddle();
  }
  frameID = requestAnimationFrame(gameLoop);
}

function updateScore() {
  scoreElement.textContent = `Score: ${score}`;
}

function updateLives() {
  livesElement.textContent = `Lives: ${lives}`;
}

function resetBall() {
  ballX = GAME_WIDTH / 2;
  ballY = GAME_HEIGHT - paddleHeight - 10;
  ballSpeedX = 4 * (Math.random() < 0.5 ? -1 : 1);
  ballSpeedY = -4;
  paddleX = (GAME_WIDTH - paddleWidth) / 2;
  targetPaddleX = paddleX;
}

function gameOver() {
  gameState = 'gameover';
  gameOverlay.innerHTML = `<h1>GAME OVER</h1><p>Score: ${score}</p><button id='restartButton'>PLAY AGAIN</button>`;
  gameOverlay.classList.remove("hidden");
  document.getElementById("restartButton").onclick = startGame;
}

function startGame() {
  score = 0;
  lives = 3;
  updateScore();
  updateLives();
  initBricks();
  resetBall();
  gameOverlay.classList.add("hidden");
  gameState = 'playing';
}

document.addEventListener("keydown", (e) => {
  const movementStep = 30;
  if (e.key === "ArrowDown") targetPaddleX += movementStep;
  if (e.key === "ArrowUp") targetPaddleX -= movementStep;
  targetPaddleX = Math.max(0, Math.min(GAME_WIDTH - paddleWidth, targetPaddleX));
});

startButton.onclick = startGame;
initBricks();
gameLoop();
</script>
</body>
</html>
